<!-- using jquery to handle days checkbox -->

<!DOCTYPE html>
<html>

<head>
  <link rel='stylesheet' href='/stylesheets/index.css' />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <!-- <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet"> -->
</head>

<body style="background-color:#273c75;">
  <div class="box p-2">
    <div class="heading d-flex gap-2">
      <a href="/flight/display"><img src="/images/edit.png" width="40"></a>
      <img src="/images/logo.jpg" alt="" width="40">
      <h4>Flight Updation</h4>
    </div>

    <form class="row g-3" method="post" action="/flight/edit_delete">

      <input type="hidden" id="dbdays" value="<%=data.days%>">
      <input type="hidden" name="fid" value="<%=data.fid%>">

      <!-- Row 1 -->
      <div class="col-md-6">
        <label for="fname" class="form-label">Flight Name</label>
        <input type="text" class="form-control" name="fname" id="fname" value="<%=data.fname%>">
      </div>
      <div class="col-md-6">
        <label for="type" class="form-label">Flight Type</label>
        <select id="type" class="form-select" name="type">
          <option selected hidden><%=data.type%></option>
          <option value="Business">Business</option>
          <option value="Economy">Economy</option>
        </select>
      </div>

      <!--  Row 2 -->
      <div class="col-md-4">
        <label for="seats" class="form-label">Total Seats</label>
        <input type="number" class="form-control" name="seats" id="seats" value="<%=data.seats%>">
      </div>

      <div class="col-md-8">
        <label for="days" class="form-check-label">Select Flight Days</label><br>
        <div class="allday d-flex gap-2">
          <span class="form-check">
            <input class="form-check-input days" type="checkbox"  value="mon" id="mon" name="days">
            <label class="form-check-label" for="mon">Mon</label>
          </span>
          <span class="form-check">
            <input class="form-check-input days" type="checkbox" value="tue" id="tue" name="days">
            <label class="form-check-label" for="tue">Tue</label>
          </span>
          <span class="form-check">
            <input class="form-check-input days" type="checkbox" value="wed" id="wed" name="days">
            <label class="form-check-label" for="wed">Wed</label>
          </span>
          <span class="form-check">
            <input class="form-check-input days" type="checkbox" value="thurs" id="thurs" name="days">
            <label class="form-check-label" for="thurs">Thurs</label>
          </span>
          <span class="form-check">
            <input class="form-check-input days" type="checkbox" value="fri" id="fri" name="days">
            <label class="form-check-label" for="fri">Fri</label>
          </span>
          <span class="form-check">
            <input class="form-check-input days" type="checkbox" value="sat" id="sat" name="days">
            <label class="form-check-label" for="sat">Sat</label>
          </span>
          <span class="form-check">
            <input  class="form-check-input days" type="checkbox" value="sun" id="sun" name="days">
            <label class="form-check-label" for="sun">Sun</label>
          </span>
        </div>
      </div>

      <!-- Row 3 -->
      <div class="col-md-3">
        <label for="scity" class="form-label">Source City</label>
        <select id="scity" class="form-select" name="scity">
          <option selected hidden value="<%=data.scity%>"><%=data.source%></option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="dtime" class="form-label">Departure Time</label>
        <input type="time" class="form-control" name="dtime" id="dtime" value="<%=data.dtime%>">
      </div>
      <div class="col-md-3">
        <label for="dcity" class="form-label">Destination City</label>
        <select id="dcity" class="form-select" name="dcity">
          <option selected hidden value="<%=data.dcity%>"><%=data.destination%></option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="atime" class="form-label">Arrival Time</label>
        <input type="time" class="form-control" name="atime" id="atime" value="<%=data.atime%>">
      </div>

      <!-- Row 4 -->
      <div class="col-md-12">
        <label for="company" class="form-label">Company</label>
        <input type="text" class="form-control" name="company" id="company" value="<%=data.company%>">
      </div>

      <!-- Row 5 -->
      <div class="col-md-6 btn">
        <button class="btn btn-dark" name="btn" value="Edit" type="submit">Edit</button>
      </div>
      <div class="col-md-6 btn">
        <button class="btn btn-dark" name="btn" value="Delete" type="submit">Delete</button>
      </div>
   
    </form>
  </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="/javascripts/script.js"></script>
<script>
    $(document).ready(function(){
      var dbdays=$("#dbdays").val().split(",")
      $(".days").map((i,item)=>{
        dbdays.map((d)=>{
          if($(item).val()==d) {
            $(item).prop("checked", true)
          }
        })
      })
    })
</script>


</html>